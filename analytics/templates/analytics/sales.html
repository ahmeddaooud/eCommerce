{% extends "base.html" %}

{% block javascript %}

    <script>
        var ctx = document.getElementById("myChart").getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ["Mon", "Tue", "Wed", "Thurs", "Fri", "Sat", "Sun"],
                datasets: [{
                    label: 'Sales per day',
                    data: [12, 19, 3, 5, 2, 3, 23],
                    backgroundColor: 'rgba(75, 13, 132, 0.3)',
                    borderColor: 'rgba(75, 13, 132, 1)',
                    {#backgroundColor: [#}
                    {#    'rgba(255, 99, 132, 0.2)',#}
                    {#    'rgba(54, 162, 235, 0.2)',#}
                    {#    'rgba(255, 206, 86, 0.2)',#}
                    {#    'rgba(75, 192, 192, 0.2)',#}
                    {#    'rgba(153, 102, 255, 0.2)',#}
                    {#    'rgba(255, 159, 64, 0.2)',#}
                    {#    'rgba(255, 159, 64, 0.2)'#}
                    {#],#}
                    {#borderColor: [#}
                    {#    'rgba(255,99,132,1)',#}
                    {#    'rgba(54, 162, 235, 1)',#}
                    {#    'rgba(255, 206, 86, 1)',#}
                    {#    'rgba(75, 192, 192, 1)',#}
                    {#    'rgba(153, 102, 255, 1)',#}
                    {#    'rgba(255, 159, 64, 1)',#}
                    {#    'rgba(255, 159, 64, 1)'#}
                    {#],#}
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
    </script>

{% endblock %}

{% block content %}

    <div class='row my-5'>
        <div class='col-12'>
            <h1>Sales Data</h1>
            <hr>
        </div>
    </div>
    <div class='row my-5'>
        <div class="col-4">
            <h3>Today`s sales</h3>
            <hr>
            <p>Recent Total: ${{ today.recent_data.total__sum }}</p>
            <ol>
                {% for order in today.recent|slice:":5" %}
                    <li>{{ order.order_id }}
                        {{ order.total }}
                        {{ order.updated }}</li>
                {% endfor %}
            </ol>
            <h3>This week`s sales</h3>
            <hr>
            <p>Recent Total: ${{ this_week.recent_data.total__sum }}</p>
            <ol>
                {% for order in this_week.recent|slice:":5" %}
                    <li>{{ order.order_id }}
                        {{ order.total }}
                        {{ order.updated }}</li>
                {% endfor %}
            </ol>
        </div>
        <div class='col'>
            <canvas id="myChart" width="400" height="400"></canvas>
        </div>
    </div>
    <hr>

    <div class='row my-5'>
        <div class="col-12">
            <h1>Previous 4 weeks</h1>
            <hr>
        </div>
        <div class='col'>
            <p>Orders Total: ${{ last_four_weeks.recent_data.total__sum }}</p>
        </div>
        <div class='col'>
            <p>Shipped Total: {% if last_four_weeks.shipped_data.total__sum %}
                ${{ last_four_weeks.shipped_data.total__sum }} {% endif %}</p>
        </div>
        <div class='col'>
            <p>Paid Totals: ${{ last_four_weeks.paid_data.total__sum }}</p>
        </div>
    </div>

{% endblock %}